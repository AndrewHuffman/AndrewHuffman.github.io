<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>JavaScript 101</title>

		<meta name="description" content="A framework for easily creating beautiful presentations using HTML">
		<meta name="author" content="Hakim El Hattab">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<link rel="stylesheet" href="css/reveal.min.css">
		<link rel="stylesheet" href="css/theme/default.css" id="theme">

		<!-- For syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- If the query includes 'print-pdf', use the PDF print sheet -->
		<script>
			document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
		</script>

		<style type="text/css">
			img {
				border: none !important;
			}
		</style>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
                    <h1>JavaScript 101</h1>
                    <h3>Andrew Huffman</h3>
                </section>
                <section>
                    <h2>What is JavaScript?</h2>
                    <div class="fragment">
		                <p>It's not Java!</p>
		                <img src="./imgs/SillyJava.png" />
                    </div>
                    <aside class="notes">
                        <ol>
                            <li>JavaScript could be to Java what Java is to C/C++.</li>
                        </ol>
                    </aside>
                </section>
                <section>
                    <section>
                        <h2>Okay, so what <em>is</em> JavaScript?</h2>
                        <div class="fragment">
                        	<p>Scripting language for web clients</p>
                        	<img 
                                src="./imgs/cordova.png" 
                                style="width: 25%; height: 25%; background: none; box-shadow: none;" />

                        	<img src="./imgs/backbone.jpg"
                                 style="width: 25%; height: 25%; margin: 30px 30px 0px 30px;" />

                        	<img src="./imgs/dojo.gif" style="margin-bottom: 50px" />
                        </div>
                        </p>
                        </ul>
                        <aside class="notes">
                        	<ol>
                                <li>Defined by ECMAScript Standard</li>
                        		<li>Object oriented &amp; functional</li>
                        		<li>Primarily has been used in the client for the UI</li>
                                <li>DOM manipulation to create animations and dynamic websites</li>
                                <li>AJAX / XHR Requests</li>
                        		<li>dojo for UI</li>
                        		<li>Cordova for hybrid phone development</li>
                        		<li>backbone for MVC</li>
                        	</ol>
                        </aside>
                    </section>
                    <section>
                        <h2>Document Object Model (DOM)</h2>
                        <img src="./imgs/dom.gif" style="height: 80%;width:80%;" />
                    </section>
                </section>
                <section>
                	<h2>Okay, so what <em>is</em> JavaScript?</h2>
                	<p>...and now the server.</p>
                	<img src="./imgs/node.png" style="width: 38%; height: 38%; margin-right: 40px;" />
                	<img src="./imgs/mongodb.png" style="width: 40%; height: 40%; padding: 5px 20px;" />
                	<aside class="notes">
                		<ol>
                			<li>nodejs &amp; express.js</li>
                			<li>mongoDB - NoSQL DB </li>
                            <li>IBM is backing both by providing our own implementations of these (Informix backed MongoAPI)</li>
                		</ol>
                	</aside>
                </section>
<!--                 <section>
                    <h2>DOM Tree</h2>
                    <img src="./dom.gif" />
                </section> -->
                <section>
                    <h2>JavaScript is Weird</h2>
                    <pre><code>[]+(-~function(){}-~function(){}-~function(){}-~function(){}) /* "4" */</code></pre>
                    <pre class="fragment"><code>({}+[])[!+[]+!+[]+!+[]]+(![]+[])[!+[]+!+[]+!+[]] /* "js" */</code></pre>
                    <pre class="fragment"><code>"0" == false /* true */
!"0" /* false */
typeof null === 'object' /* true */</code></pre>
<pre class="fragment"><code>(function foo() {
    // Do something
})();
</code></pre>
<pre class="fragment"><code>function makeAddFunction(arr, amount) {
    arr["add"+amount] = function() {
        var idx = 0, newArray = [];
        this.forEach(function(value) { newArray.push(value+amount) });
        return newArray;
    }
}
var myArray = [2,4,5];
makeAddFunction(myArray, 5); //Creates myArray.add5
var newArray = myArray.add5(); //[7,9,10]
newArray.add5(); //Error!
</code></pre>
                    <aside class="notes">
                        <ol>
                            <li>Returns string of "4." ~ bitwise NOT.</li>
                            <li>"0" is evaluated as the integer 0, but !"0" is checking to see if the variable isn't null</li>
                            <li>Self-invoked function. Used to scope variables to a single javascript file.</li>
                        </ol>
                    </aside>
                </section>
                <section>
                    <h2>JavaScript Doesn't Force Structure</h2>
<pre style="width: 1100px;margin-left:-40px"><code style="width: 1100px;margin-left:0px">var source = "./imgs",
    maxHeight = 1000;

s.readdir(source, function(err, files) {
    if(err) {
        console.log("Error finding files: "+err);
    } else {
        files.forEach(function(filename)) {
            gm(source+filename).size(function(err, imgProperties) {
                if (err) {
                    console.log("Error identifying file size: "+err);
                } else {
                    var aspect = (values.width / values.height)
                    widths.forEach(function(width, widthIndex) {
                        height = Math.min(Math.round(width/aspect), maxHeight);
                        console.log("resizing " + filename + " to " + width+'x'+height);
                        this.resize(width, height).write(destination, function(err) {
                            if(err) { console.log('Error writing file: '+err); }
                        });
                    }).bind(this);
                }
            })
        }
    }
}</code></pre>
                </section>
                <section>
                    <h2>JavaScipt Types</h2>
<pre><code style="line-height: 28px;">var aNumber = 5; /* Number */
aNumber = aNumber/2; /* = 2.5 */
var aString = "A string"; /* String */
var aBool = true; /* Boolean */
var arr = [1,2,3]; /* Array */

var regEx = /^[A-Z]+/; /* RegExp */
var aFun = function(x) { return x + 1}; /* Function */
var anObjLiteral = { foo: "bar" }; /* Object */

var aNull = null;
var anUndefined; /* undefined */
var someObj = { "a": "b" };
someObj.c; /* undefined */</code></pre>
                    <aside class="notes">
                    <ol>
                        <li>Loosely typed</li>
                        <li>All numbers are essentially floats</li>
                        <li>Undefined is a variable that hasn't been defined. Null is a null object.</li>
                    </ol>
                    </aside>
                </section>
                <section>
                    <h2>Object Literals</h2>
                    <p>
<pre><code>var theWallAlbum = {
    title: "The Wall",
    artist: "Pink Floyd",
    tracks: ["In the Flesh?", "The Thin Ice", ...],
    isAwesome: true,
    rating: 5,
    numTracks: function() {
        return theWallAlbum.tracks.length;
    }
};

theWallAlbum.title; //"The Wall"
theWallAlbum["artist"]; //"Pink Floyd"
theWallAlbum.released = "Nov 30, 1979";
theWallAlbum.numTracks(); //27</code></pre>
                    </p>
                    <aside class="notes">
                        <ol>
                            <li>A hash table. Same as PHP's associative array or Python's dictionary.</li>
                            <li>Properties bags (e.g., named paramters)</li>
                            <li>Lazy variable referencing</li>
                            <li>Dot-notation</li>
                            <li>Bracket-notation</li>
                            <li>Adding properties</li>
                        </ol>
                    </aside>
                </section>
                <section>
                    <h2>Arrays</h2>
<pre style="width: 1000px;line-height:30px;"><code>var anArray = [1,2,3,"four",false];
anArray[2]; /* 3 */
anArray.length; /* 5 */
</code></pre>
<pre class="fragment" style="width: 1000px;line-height:30px;"><code>anArray.push(6); /* [1,2,3,"four",false,6] */
anArray.pop(); /* returns 6 */
anArray.join(","); /* "1,2,3,four,false" */
</code></pre>
<pre class="fragment" style="width: 1000px;line-height:30px;"><code>anArray.forEach(function(elm) { /* Do something */ });
anArray.filter(function(elm) { return elm > 1 }); /* [3,4] */
var sumArray = [1,2,3,4];
sumArray = sumArray.map(function(n) { return n*n }); //[1,4,9,16]
sumArray.reduce(function(prev, curr) { return prev + curr }); //30</code></pre>
                <aside class="notes">
                    <ol>
                        <li>[].join USED TO BE more performant than concatenation</li>
                        <li>Point out functions can be passed in as arguments</li>
                        <li>ECMAScript 5 (IE9+) - dojo altneratives</li>
                    </ol>
                </aside>
                </section>
                <section>
                    <h2>Functions</h2>
<pre><code>foo(); /* > "foo called" */
/* Declaration */
function foo() {
    console.log("foo called");
}

bar(); /* Error! */
/* Expression */
var bar = function() {
    console.log("bar called");
}
</code></pre><pre><code>/* logMessage(msg[, tag, [level]]) */
function logMessage(msg) {
    var tag   = arguments[1] || "Global",
        level = arguments[2] || "INFO";

    console.log("[%s] - [%s]: %s", level, tag, msg);
}
logMessage("Something bad happened.", "PageController", "ERROR");</code></pre>
            <aside class="notes">
                - Be careful about using '||' to check for null values
            </aside>    
                </section>
                <section>
                    <h2>Nested Functions</h2>
<pre style="width: 950px;"><code>function goodArtistTable(artists) {
    function _buildRow(artist) {
        var row = $("&lt;tr&gt;");
        row.append($("&lt;td&gt;").text(artist.name));
        row.append($("&lt;td&gt;").text(artist.album));
        return row;
    }
    var goodArtists = artists.filter(function(artist) { return artist.isGood });
    var table = $("&lt;table&gt;");
    goodArtists.map(_buildRow).forEach(
        function(row) {
            table.append(row)
        }
    );
    
    return table;
}</code></pre>
            <aside class="notes">
                - Point out jQuery function
            </aside>
                </section>
                <section>
                    <h2>Closures</h2>
<pre><code>function adderTracker() {
    var additions = 0;
    return function(x, y) {
        additions++;
        console.log("additions: "+additions)
        return x+y;
    }
}

var add = adderTracker();
add(1,2);  // &gt; "additions: 1"
add(4,2);  // &gt; "additions: 2"
add(12,2); // &gt; "additions: 3"</code></pre>
                <aside class="notes">
                    <ol>
                        <li>A function that has enclosed a variable outside its scope</li>
                        <li>Similar to objects</li>
                        <li>Great for reducing repeated code for callbacks</li>
                        <li>Currying &amp; Partial Applications</li>
                    </ol>
                </aside>
                </section>
                <section>
                <h2>Closures: Use Case</h2>
<pre><code>xhr.get("/employees", function(err, response) {
    console.log("Server response for /employees: %j", response);
    if (err) {
        console.log("Error communicating with server.");
        console.error(err.stack);
    } else {
        if (response &amp;&amp; response.data &amp;&amp; response.data.length > 0) {
            console.log("Results: %j", response.data);
            /* Do something with data */
        }
    }
));</code></pre><pre><code> xhr.get("/departments", function(err, response) {
    console.log("Server response for /departments: %j", response);
    if (err) {
        console.log("Error communicating with server.");
        console.error(err.stack);
    } else {
        if (response &amp;&amp; response.data &amp;&amp; response.data.length > 0) {
            console.log("Results: %j", response.data);
            /* Do something with data */
        }
    }
));</code></pre>
                </section> 
                <section>
                <h2>Closures: Use Case</h2>
<pre style="width: 1100px;margin-left:-60px"><code style="width: 1100px;margin-left:0px">var _handleServerResponse(next) {
    return function(err, response) {
        var isError = !!err;
        console.log("Server responded - endpoint: %s isError: %s, response: %j",
            response.endpoint, isError, response);

        if(isError) { console.error(err.stack); }
        var formattedResponse = {
            success: !isError,
            error: err,
            response: response,
            data: (response &amp;&amp; response.data &amp;&amp; response.data.length >= 0) ? response.data : []
        };

        next(formattedResponse);
    }
}</code></pre>
                </section>
                <section>
                <h2>Closures: Use Case</h2>
                <pre><code>xhr.get("/employees", 
    _handServerResponse(function(response) {
        response.data.forEach(function(emp) {
            //Add employee to table
        });
    }
));

xhr.post("/departments", 
    _handServerResponse(function(response) {
        response.data.forEach(function(dept) {
            //Add department to table
        });
    }
));</code></pre>
                </section>
                <section>
                    <h2>Constructing Objects</h2>
                    <p>Objects &larr; &rarr; Functions</p>
<pre><code>function Person(name, age) {
    this.name = name;
    this.age  = age;
}
Person.prototype = {
    getName: function() { return this.name; },
    getAge: function() { return this.age; }
};</code></pre>
<div class="fragment">
<pre><code>function Person(name, age) {
    this.name = name;
    this.age  = age;
    this.getName = function() { return this.name; };
    this.getAge  = function() { return this.age; };
}</code></pre>
<pre><code>var john = new Person("John", 33);
john.getAge(); //33
</code></pre>
</div>
                <aside class="notes">
                    <ol>
                        <li>Objects are prototype-based (class-less)</li>
                        <li>Privilege methods</li>
                    </ol>
                </aside>
                </section>
                <section>
                <h2>Prototype Augmentation</h2>
<pre><code>Array.prototype.double = function() {
    var doubleArray = this.slice(0); //Copies 'this' array
    this.forEach(function(elm) {
        doubleArray.push(elm)
    });
    return doubleArray;
}

var doubleArray = [1,2,3].double(); //[1,2,3,1,2,3]</code></pre>
                </section>
                <section>
                <h2>Prototype Inheritence</h2>
<pre><code>/* Employee inherits from Person */
function Employee(name, age, department) {
    Person.call(this, name, age)
    this.department = department
}

Employee.prototype = new Employee()
Employee.prototype.constructor = Employee
Employee.prototype.getDepartment = function() {
    return this.department
}
</code></pre><pre><code>var sally = new Employee("Sally", 29, "Human Resources")
sally instanceOf Person // true
sally.getDepartment() //"Human Resources"
sally.getName() //"Sally"
</code></pre>
                <aside class="notes">
                    <ol>
                        <li>Point out 'call' on Person</li>
                    </ol>
                </aside>
                </section>
                <section>
                    <h2>Gotchas: 'this' Scoping</h2>
                    <p>'<code>this</code>' refers to the context a function is called within.
<pre><code style="max-height: 600px;max-width: 900px;padding:0">function ObjA() {
    this.myField = "ObjA's Field";
    this.callMeBack = function(aFun) { aFun() };
}                                    

function ObjB() {
    this.myField = "ObjB's Field";
    this.printMyField = function() {
        console.log("myField: %s", this.myField)
    };
}

var objA = new ObjA();
var objB = new ObjB();

objA.callMeBack(objB.printMyField); // > "myField: undefined"
objA.callMeBack(objB.printMyField.bind(objB)); // > "myField: objB's Field"
objA.callMeBack(objB.printMyField.bind(objA)); // >"myField: ObjA's Field"</code></pre>
                </section>
                <section>
                    <h2>Other Gotchas</h2>
                    <ul>
                        <li>Lazy Scoping</li>
                        <li>Globals</li>
                        <li><code>for-in</code> loops</li>
                    </ul>
                </section>
                <section>
                    <h2>Deferreds &amp; Promises</h2>
<pre><code>function getEmployeesWithManager(manager) {
    var deferred = new Deferred();
    xhr("/employees").then(
        function success(data) {
            var managerEmployees =
                data.filter(function(emp) {
                    return emp == manager
                    }
                );
            deferred.resolve(managerEmployees);
        }, function err(err) {
            var reason = err.msg;
            deferred.reject(reason)
        }
    );
    return deferred.promise;
}</code></pre><pre><code>getEmployeesWithManager("Jane").then(
    function success(janesEmployees) {
        /* Do Something */
    }, function err(errMsg) {
        console.error(errMsg);
    }
);
</code></pre>
                </section>
                <section>
                    <h2>Aspects</h2>
                </section>
                <section>
                    <h2>Modules</h2>
                    <p>Asynchronous Module Definitions (AMD)</p>
<pre><code>define(["dojo/declare", "dojo/form/Form", "dojo/form/TextBox"],
    function(declare, Form, TextBox) {
        return declare("widgets/MyWidget", {
            /* Define widget */
        });
    }
)</code></pre>
                </section>
                <section><h2>Modules</h2>
<p>NodeJS Modules</p>
<pre><code>/* Define Module */

module.exports.Model = {};

var EmployeeModel = {
    getEmployees: function(onFinish) {
        //retrieve employees from DB
        onFinish(error, results);
    },

    addEmployee: function(employee, onFinish) {
        //add employee to DB
        onFinish(error, newEmployeeId);
    }
}

module.exports.Model.Employee = EmployeeModel</code></pre>
                </section>
            </div>
        </div>
		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.min.js"></script>

		<script>

			// Full list of configuration options available here:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
				transition: "linear",
				//transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/fade/none

				// Parallax scrolling
				// parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
				// parallaxBackgroundSize: '2100px 900px',

				// Optional libraries used to extend on reveal.js
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
					{ src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
				]
			});

		</script>

	</body>
</html>